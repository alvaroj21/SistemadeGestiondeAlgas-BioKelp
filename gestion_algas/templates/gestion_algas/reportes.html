{% extends "gestion_algas/base.html" %}

{% block title %}Reportes - Sistema Algas{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2>Reportes de Producción</h2>
        <p class="text-muted">Análisis y estadísticas del sistema</p>
    </div>
</div>

<!-- Reporte por Tipo de Alga -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Producción por Tipo de Alga</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Tipo de Alga</th>
                                <th>Total Cosechado (kg)</th>
                                <th>Total Volumen (l)</th>
                                <th>Registros</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for reporte in reporte_tipos %}
                            <tr>
                                <td>{{ reporte.nombre }}</td>
                                <td>{{ reporte.total_cosechado|floatformat:2|default:"0.00" }}</td>
                                <td>{{ reporte.total_volumen|floatformat:2|default:"0.00" }}</td>
                                <td>{{ reporte.total_registros }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center text-muted">No hay datos disponibles</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Producción Semanal -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Producción por Semana</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Semana</th>
                                <th>Total Cosechado (kg)</th>
                                <th>Total Volumen (l)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for semana in reporte_semanas %}
                            <tr>
                                <td>Semana {{ semana.semana }}</td>
                                <td>{{ semana.total_cosechado|floatformat:2|default:"0.00" }}</td>
                                <td>{{ semana.total_volumen|floatformat:2|default:"0.00" }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="3" class="text-center text-muted">No hay datos disponibles</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
